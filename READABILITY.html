<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JIRA Ticket Readability Evaluation Pipeline</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* HSBC Standard Grey */
            color: #2d2d2d;
        }

        /* HSBC Brand Colors Hint */
        :root {
            --hsbc-red: #db0011;
            --hsbc-dark: #2d2d2d;
        }

        .hsbc-red-text { color: var(--hsbc-red); }
        .hsbc-red-bg { background-color: var(--hsbc-red); }

        /* Animations */
        .fade-in-up {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s ease-out forwards;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        @keyframes fadeInUp {
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; }
        .delay-400 { animation-delay: 0.4s; }
        .delay-500 { animation-delay: 0.5s; }
        .delay-600 { animation-delay: 0.6s; }
        .delay-700 { animation-delay: 0.7s; }

        /* Card Interactions */
        .pipeline-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        .pipeline-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            border-bottom: 4px solid var(--hsbc-red);
        }

        /* JIRA Ticket Styles */
        .jira-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.9em;
        }
        .jira-table th, .jira-table td {
            border: 1px solid #dfe1e6;
            padding: 8px;
            text-align: left;
        }
        .jira-table th {
            background-color: #f4f5f7;
            font-weight: 600;
            color: #172b4d;
        }
        .jira-link {
            color: #0052cc;
            text-decoration: none;
        }
        .jira-link:hover {
            text-decoration: underline;
        }
        
        /* Tab Active State */
        .tab-btn.active {
            border-bottom: 2px solid var(--hsbc-red); /* HSBC Red */
            color: #000;
            font-weight: 600;
        }

        /* Feature Tree Connectors */
        .tree-connector-v {
            width: 2px;
            background-color: #cbd5e1;
            position: absolute;
        }
        .tree-connector-h {
            height: 2px;
            background-color: #cbd5e1;
            position: absolute;
        }
        .bracket {
            border-right: 2px solid #94a3b8;
            border-top: 2px solid #94a3b8;
            border-bottom: 2px solid #94a3b8;
            width: 20px;
            position: absolute;
            right: -20px;
            top: 20px;
            bottom: 20px;
            border-top-right-radius: 10px;
            border-bottom-right-radius: 10px;
        }
        /* Custom Bracket for Feature View */
        .feature-bracket {
            position: absolute;
            left: -20px;
            top: 10%;
            bottom: 10%;
            width: 20px;
            border-left: 3px solid #cbd5e1;
            border-top: 3px solid #cbd5e1;
            border-bottom: 3px solid #cbd5e1;
            border-top-left-radius: 12px;
            border-bottom-left-radius: 12px;
        }
        .feature-bracket::after {
            content: '';
            position: absolute;
            top: 50%;
            left: -3px; /* Align with border-left */
            width: 15px;
            height: 3px;
            background-color: #cbd5e1;
            transform: translate(-100%, -50%);
        }

        /* Math Formulas CSS */
        .math-formula {
            display: inline-flex;
            align-items: center;
            font-family: 'Times New Roman', serif;
            font-style: italic;
        }
        .fraction {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            margin: 0 4px;
            vertical-align: middle;
            font-size: 0.9em;
        }
        .numerator {
            border-bottom: 1px solid currentColor;
            padding: 0 2px;
            text-align: center;
        }
        .denominator {
            padding: 0 2px;
            text-align: center;
        }
        .sub {
            font-size: 0.7em;
            vertical-align: sub;
        }
        
        /* Sticky Offset for Internal Navbars (below main header) */
        .sticky-sub-nav {
            position: sticky;
            top: 72px; /* Height of main header approx */
            z-index: 40;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Navbar / Header (Consistent Branding) -->
    <nav class="w-full bg-white shadow-sm py-4 px-8 flex justify-between items-center fixed top-0 z-50 h-[72px]">
        <div class="flex items-center gap-4">
            <img src="https://upload.wikimedia.org/wikipedia/commons/a/aa/HSBC_logo_%282018%29.svg" alt="HSBC Logo" class="h-10 w-auto">
            <div class="text-xl font-bold tracking-tight text-gray-900 border-l-2 border-gray-200 pl-4">
                <span class="hsbc-red-text">Agile</span> Quality Assurance
            </div>
        </div>
        <div class="text-sm text-gray-500 uppercase tracking-widest font-semibold">Evaluation Logic</div>
    </nav>

    <!-- VIEW 1: MAIN PIPELINE -->
    <div id="pipeline-view" class="flex flex-col items-center justify-center min-h-screen p-6 w-full transition-opacity duration-500 pt-24">
        
        <!-- Header -->
        <header class="text-center mb-12 fade-in-up">
            <span class="inline-block py-1 px-3 rounded-full bg-gray-100 text-gray-600 text-xs font-bold tracking-wide uppercase mb-4">
                Workflow
            </span>
            <h1 class="text-4xl md:text-5xl font-bold text-slate-900 mb-4 tracking-tight">
                JIRA Ticket Readability <span class="hsbc-red-text">Evaluation Pipeline</span>
            </h1>
            <p class="text-lg text-slate-500 max-w-2xl mx-auto">
                An automated workflow transforming raw text into human-aligned readability scores.
            </p>
        </header>

        <div class="relative w-full max-w-6xl mx-auto">
            
            <!-- ROW 1 -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-16 relative">
                
                <!-- Card 1: Raw Tickets (Clickable) -->
                <div onclick="switchView('ticket-view')" class="pipeline-card fade-in-up delay-100 bg-white p-6 rounded-xl border border-slate-200 shadow-sm relative z-10 flex flex-col items-center text-center h-full group">
                    <div class="w-12 h-12 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                        <i class="fas fa-file-alt text-xl"></i>
                    </div>
                    <h3 class="font-bold text-lg mb-2 text-slate-800">Raw JIRA Tickets</h3>
                    <p class="text-sm text-slate-500">Short, domain-specific issue descriptions and comments.</p>
                    <span class="mt-auto text-xs font-semibold text-blue-600 pt-2 bg-blue-50 px-3 py-1 rounded-full mt-4">View Scenarios</span>
                </div>

                <!-- Card 2: Feature Extraction (Clickable Now) -->
                <div onclick="switchView('feature-view')" class="pipeline-card fade-in-up delay-200 bg-white p-6 rounded-xl border border-slate-200 shadow-sm relative z-10 flex flex-col items-center text-center h-full group">
                    <div class="w-12 h-12 bg-indigo-50 text-indigo-600 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                        <i class="fas fa-flask text-xl"></i>
                    </div>
                    <h3 class="font-bold text-lg mb-2">Feature Extraction</h3>
                    <p class="text-sm text-slate-500">25 linguistic & readability features extracted per ticket.</p>
                    <span class="mt-auto text-xs font-semibold text-indigo-600 pt-2 bg-indigo-50 px-3 py-1 rounded-full mt-4">View Details</span>
                </div>

                <!-- Card 3: Human Annotation (Clickable Now) -->
                <div onclick="switchView('annotation-view')" class="pipeline-card fade-in-up delay-300 bg-white p-6 rounded-xl border border-slate-200 shadow-sm relative z-10 flex flex-col items-center text-center h-full group">
                    <div class="w-12 h-12 bg-purple-50 text-purple-600 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                        <i class="fas fa-users text-xl"></i>
                    </div>
                    <h3 class="font-bold text-lg mb-2">Human Annotation</h3>
                    <div class="text-xs font-mono bg-slate-100 px-3 py-1 rounded text-slate-600 mt-1">
                        0 = Poor <br> 1 = Normal <br> 2 = Good
                    </div>
                    <span class="mt-auto text-xs font-semibold text-purple-600 pt-2 bg-purple-50 px-3 py-1 rounded-full mt-4">View Logic</span>
                </div>

                <!-- Card 4: Intelligent Ticket Selection -->
                <div onclick="switchView('selection-view')" class="pipeline-card fade-in-up delay-400 bg-blue-50 p-6 rounded-xl border border-blue-200 shadow-sm relative z-10 flex flex-col items-center text-center h-full group">
                    <div class="w-12 h-12 bg-white text-blue-600 rounded-full flex items-center justify-center mb-4 shadow-sm group-hover:scale-110 transition-transform">
                        <i class="fas fa-filter text-xl"></i>
                    </div>
                    <h3 class="font-bold text-lg mb-2 text-blue-900">Intelligent Ticket Selection</h3>
                    <p class="text-sm text-blue-700">Smart Filtering</p>
                    <span class="mt-auto text-xs font-semibold text-blue-700 pt-2 bg-white border border-blue-100 px-3 py-1 rounded-full mt-4">View Example</span>
                </div>
            </div>

            <!-- ROW 2 -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 max-w-3xl mx-auto mb-16 relative">
                <!-- Card 5: ML Model (UPDATED) -->
                <div onclick="switchView('ml-view')" class="pipeline-card fade-in-up delay-500 bg-white p-8 rounded-xl border border-slate-200 shadow-sm relative z-10 flex flex-col items-center text-center cursor-pointer group">
                    <div class="w-14 h-14 bg-emerald-50 text-emerald-600 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                        <i class="fas fa-brain text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-xl mb-2">ML Model: XGBoost</h3>
                    <p class="text-sm text-slate-500">Learns relation between features & perception.</p>
                    <span class="mt-auto text-xs font-semibold text-emerald-600 pt-2 bg-emerald-50 px-3 py-1 rounded-full mt-4">View Model</span>
                </div>
                <!-- Card 6: Value Mapping (UPDATED) -->
                <div onclick="switchView('mapping-view')" class="pipeline-card fade-in-up delay-600 bg-white p-8 rounded-xl border border-slate-200 shadow-sm relative z-10 flex flex-col items-center text-center cursor-pointer group">
                    <div class="w-14 h-14 bg-orange-50 text-orange-600 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                        <i class="fas fa-chart-line text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-xl mb-2">Value Mapping</h3>
                    <p class="text-sm text-slate-500">Transforms probabilities into Score (0–100).</p>
                    <span class="mt-auto text-xs font-semibold text-orange-600 pt-2 bg-orange-50 px-3 py-1 rounded-full mt-4">View Scores</span>
                </div>
            </div>
        </div>
    </div>


    <!-- VIEW 2: TICKET DETAILS (Initially Hidden) -->
    <div id="ticket-view" class="hidden min-h-screen bg-white flex flex-col pt-24">
        
        <!-- Navbar -->
        <div class="border-b border-gray-200 px-8 py-4 flex items-center justify-between bg-white sticky-sub-nav shadow-sm">
            <button onclick="switchView('pipeline-view')" class="flex items-center text-slate-600 hover:text-black transition-colors font-medium">
                <i class="fas fa-arrow-left mr-2"></i>
                Back to Pipeline
            </button>
            <div class="text-lg font-bold text-slate-800">Raw Data Inspection: PROJ-1024</div>
        </div>

        <!-- Content Area -->
        <div class="flex-grow p-8 bg-slate-50 flex justify-center fade-in">
            <div class="w-full max-w-4xl bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                
                <!-- Tabs -->
                <div class="flex border-b border-gray-200 bg-gray-50 flex-wrap">
                    <button onclick="showTab('scenario-1', this)" class="tab-btn active px-6 py-3 text-sm font-medium text-gray-600 hover:bg-gray-100 focus:outline-none transition-colors">Scenario 1: JIRA Front-End</button>
                    <button onclick="showTab('scenario-2', this)" class="tab-btn px-6 py-3 text-sm font-medium text-gray-600 hover:bg-gray-100 focus:outline-none transition-colors">Scenario 2: JIRA Markup</button>
                    <button onclick="showTab('scenario-3', this)" class="tab-btn px-6 py-3 text-sm font-medium text-gray-600 hover:bg-gray-100 focus:outline-none transition-colors">Scenario 3: Clean Text</button>
                    <button onclick="showTab('scenario-4', this)" class="tab-btn px-6 py-3 text-sm font-medium text-gray-600 hover:bg-gray-100 focus:outline-none transition-colors">Scenario 4: Grammar Check</button>
                </div>

                <!-- Tab Content 1: Visual -->
                <div id="scenario-1" class="tab-content p-8">
                    <div class="border border-gray-200 rounded p-6 bg-white">
                        <!-- Intentionally missing period for Scenario 4 fix -->
                        <h2 class="text-xl font-semibold text-[#172b4d] mb-4">As a developer, I want to add a robust logging feature</h2>
                        <div class="text-[#172b4d] text-base space-y-4">
                            <!-- Intentionally misspelled 'loging' for Scenario 4 fix -->
                            <p>We need to implement <strong>structured loging</strong> across the authentication service. This will help us debug issues in production more effectively.</p>
                            
                            <p>The logs should include timestamp, user ID, and request latency. <span style="color: #d04437; font-weight: bold;">Critical: Do not log passwords!</span></p>

                            <h4 class="font-bold mt-4 text-sm uppercase text-gray-500">Acceptance Criteria</h4>
                            <table class="jira-table">
                                <thead>
                                    <tr>
                                        <th>Requirement</th>
                                        <th>Priority</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>JSON Format Output</td>
                                        <td>High</td>
                                        <td>Pending</td>
                                    </tr>
                                    <tr>
                                        <td>PII Masking</td>
                                        <td>Critical</td>
                                        <td>In Review</td>
                                    </tr>
                                </tbody>
                            </table>

                            <div class="mt-6 pt-4 border-t border-gray-100 text-sm">
                                <span class="font-semibold">Contact Owner:</span> 
                                <a href="mailto:ali@example.com" class="jira-link">ali@example.com</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab Content 2: JIRA Markup -->
                <div id="scenario-2" class="tab-content hidden p-0 bg-[#282c34]">
                    <pre class="p-6 overflow-x-auto text-sm font-mono text-gray-300 leading-relaxed">
h2. As a developer, I want to add a robust logging feature
We need to implement *structured loging* across the authentication service.

The logs should include timestamp, user ID. {color:#d04437}Critical: Do not log passwords!{color}

||Requirement||Priority||
|JSON Format Output|High|

[Contact|mailto:ali@example.com]</pre>
                </div>

                <!-- Tab Content 3: Clean Text (Dirty) -->
                <div id="scenario-3" class="tab-content hidden p-8 bg-white">
                    <div class="font-mono text-sm text-slate-700 whitespace-pre-wrap leading-7 bg-slate-50 p-6 rounded border border-slate-200">
As a developer, I want to add a robust logging feature

We need to implement structured loging across the authentication service. This will help us debug issues in production more effectively.

The logs should include timestamp, user ID, and request latency. Critical: Do not log passwords!

Acceptance Criteria:
Requirement: JSON Format Output, Priority: High, Status: Pending
Requirement: PII Masking, Priority: Critical, Status: In Review
                    </div>
                </div>

                <!-- Tab Content 4: Grammar Check (Corrected) -->
                <div id="scenario-4" class="tab-content hidden p-8 bg-white">
                    <div class="font-mono text-sm text-slate-700 whitespace-pre-wrap leading-7 bg-green-50 p-6 rounded border border-green-200 relative">
                        <div class="absolute top-2 right-2 bg-green-200 text-green-800 text-xs px-2 py-1 rounded font-semibold">Verified</div>
As a developer, I want to add a robust logging feature.

We need to implement structured logging across the authentication service. This will help us debug issues in production more effectively.

The logs should include timestamp, user ID, and request latency. Critical: Do not log passwords!

Acceptance Criteria:
Requirement: JSON Format Output, Priority: High, Status: Pending.
Requirement: PII Masking, Priority: Critical, Status: In Review.
                    </div>
                    <div class="mt-4 text-sm text-slate-500">
                        <span class="font-semibold text-green-600">Corrections applied:</span>
                        <ul class="list-disc ml-5 mt-1">
                            <li>Added missing period to title.</li>
                            <li>Corrected spelling: "loging" &rarr; "logging".</li>
                            <li>Added missing periods to list items.</li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>
    </div>
    
    <!-- VIEW 3: FEATURE EXTRACTION BREAKDOWN -->
    <div id="feature-view" class="hidden min-h-screen bg-slate-50 flex flex-col pt-24">
        <!-- Navbar -->
        <div class="border-b border-gray-200 px-8 py-4 flex items-center justify-between bg-white sticky-sub-nav shadow-sm">
            <button onclick="switchView('pipeline-view')" class="flex items-center text-slate-600 hover:text-indigo-600 transition-colors font-medium">
                <i class="fas fa-arrow-left mr-2"></i>
                Back to Pipeline
            </button>
            <div class="text-lg font-bold text-slate-800">Feature Extraction Breakdown</div>
        </div>

        <!-- Tree Diagram Area -->
        <div class="flex-grow p-8 flex items-center justify-center overflow-auto fade-in">
            <div class="flex items-center gap-12 w-full max-w-6xl">
                
                <!-- Level 1: Cleaned Text -->
                <div class="flex-shrink-0 relative">
                    <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-indigo-500 w-48 text-center relative z-10">
                        <div class="font-bold text-gray-800 mb-2">Cleaned Text</div>
                        <div class="text-xs text-gray-500">Processed Input</div>
                    </div>
                    
                    <!-- Connection Line Out -->
                    <div class="absolute top-1/2 right-0 w-8 h-0.5 bg-slate-300 translate-x-full"></div>
                </div>

                <!-- Level 2: Categories (Split) -->
                <div class="flex flex-col gap-12 flex-grow relative">
                    
                    <!-- Vertical Connector Spine -->
                    <div class="absolute left-[-24px] top-[20%] bottom-[20%] w-6 border-l-2 border-slate-300 rounded-l-xl"></div>
                    <!-- Connector dots/arms -->
                    <div class="absolute left-[-24px] top-[20%] w-6 h-0.5 bg-slate-300"></div>
                    <div class="absolute left-[-24px] bottom-[20%] w-6 h-0.5 bg-slate-300"></div>


                    <!-- Top Group: Global Readability -->
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm relative w-full">
                        <h3 class="font-bold text-lg text-indigo-700 mb-4 border-b pb-2">Global Readability Formula</h3>
                        
                        <div class="grid grid-cols-1 gap-3">
                            
                            <!-- 1. Flesch-Kincaid Grade (MATH FORMULA) -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm mb-1">Flesch-Kincaid Grade</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">US Navy, 1975</div>
                                <div class="font-mono text-xs text-indigo-800 bg-white p-2 rounded border border-indigo-100 text-center">
                                    (0.39 × ASL) + (11.8 × ASW) - 15.59
                                </div>
                                <div class="text-[9px] text-indigo-400 mt-1 text-center mb-2">
                                    ASL: Avg Sentence Length | ASW: Avg Syllables/Word
                                </div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>

                            <!-- 2. LIX Formula (MATH FORMULA) -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm mb-1">LIX Formula</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">Sweden, 1968</div>
                                <div class="font-mono text-xs text-indigo-800 bg-white p-2 rounded border border-indigo-100 text-center">
                                    (Words / Sentences) + (Long Words / Words × 100)
                                </div>
                                <div class="text-[9px] text-indigo-400 mt-1 text-center mb-2">
                                    Long Words: >6 letters
                                </div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>

                            <!-- 3. Linsear Write Formula (LW - MATH FORMULA ADDED) -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm mb-1">Linsear Write Formula (LW)</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">US Navy, 1970</div>
                                <div class="math-formula text-sm text-indigo-800 bg-white p-3 rounded border border-indigo-100 text-center w-full flex justify-center overflow-x-auto">
                                    <div class="fraction">
                                        <span class="numerator flex items-center">
                                            [ (100 - (
                                            <div class="fraction">
                                                <span class="numerator">100 × n<span class="sub">wsy&lt;3</span></span>
                                                <span class="denominator">n<span class="sub">w</span></span>
                                            </div>
                                            )) + (3 × 
                                            <div class="fraction">
                                                <span class="numerator">100 × n<span class="sub">wsy≥3</span></span>
                                                <span class="denominator">n<span class="sub">w</span></span>
                                            </div>
                                            ) ]
                                        </span>
                                        <span class="denominator flex items-center justify-center pt-1">
                                            (100 × 
                                            <div class="fraction">
                                                <span class="numerator">n<span class="sub">st</span></span>
                                                <span class="denominator">n<span class="sub">w</span></span>
                                            </div>)
                                        </span>
                                    </div>
                                </div>
                                <div class="text-[9px] text-indigo-400 mt-2 text-center mb-2">
                                    n<sub>wsy&lt;3</sub>: Words &lt;3 syl | n<sub>wsy≥3</sub>: Words ≥3 syl | n<sub>st</sub>: Sentences | n<sub>w</sub>: Words
                                </div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>
                            
                            <!-- 4. Gunning Fog -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm">Gunning Fog</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">Business Writing, 1952</div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>
                            <!-- 5. ARI -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm">Automated Readability Index (ARI)</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">US Air Force, 1967</div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>
                            <!-- 6. SMOG -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm">SMOG Index</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">McLaughlin, 1969</div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>
                            <!-- 7. CLI -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm">Coleman-Liau Index (CLI)</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">Linguistics, 1975</div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>
                            <!-- 8. Dale-Chall -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm">Dale-Chall Score</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">Ohio State, 1948</div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>
                            <!-- 9. Spache -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm">Spache Formula</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">Primary Grades, 1953</div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom Group: Linguistic Analysis -->
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm relative">
                        <h3 class="font-bold text-lg text-purple-700 mb-4 border-b pb-2">Linguistic Analysis</h3>
                        
                        <div class="grid grid-cols-1 gap-3">
                            <!-- 1. avg_sentence_length_tokens -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Average tokens per sentence</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 2. sentence_length_cv -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Sentence length variation</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 3. clause_density_finite_per_sentence -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Finite clauses per sentence</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 4. subordination_ratio -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Ratio of subordinate clauses</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 5. coordination_index_cconj_per_clause -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Coordination index per clause</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 6. avg_dependency_distance -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Average word dependency distance</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 7. np_mean_length_tokens -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Average noun phrase length</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 8. nominalization_density -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Density of nominalizations</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 9. noun_verb_ratio -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Ratio of nouns to verbs</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 10. passive_voice_percent_finite_verbs -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Percentage of passive verbs</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 11. mean_zipf_lemma -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Average word frequency score</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 12. lexical_diversity_mattr -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Vocabulary diversity score</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 13. technical_jargon_density -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Density of technical jargon</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 14. negation_density_per_sentence -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Negations per sentence</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 15. idea_density_predicates_per_10w -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Idea density per ten words</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>

    <!-- VIEW 4: ANNOTATION LOGIC -->
    <div id="annotation-view" class="hidden min-h-screen bg-slate-50 flex flex-col pt-24">
        <!-- Navbar -->
        <div class="border-b border-gray-200 px-8 py-4 flex items-center justify-between bg-white sticky-sub-nav shadow-sm">
            <button onclick="switchView('pipeline-view')" class="flex items-center text-slate-600 hover:text-purple-600 transition-colors font-medium">
                <i class="fas fa-arrow-left mr-2"></i>
                Back to Pipeline
            </button>
            <div class="text-lg font-bold text-slate-800">Truth & Annotation Logic</div>
        </div>

        <!-- Tree Diagram Area -->
        <div class="flex-grow p-8 flex items-center justify-center overflow-auto fade-in">
            <div class="flex items-center gap-12 w-full max-w-5xl">
                
                <!-- Level 1: Truth Concept -->
                <div class="flex-shrink-0 relative">
                    <div class="bg-white p-8 rounded-lg shadow-md border-l-4 border-slate-500 w-48 text-center relative z-10">
                        <div class="font-bold text-xl text-gray-800 mb-2">Truth Concept</div>
                        <div class="text-xs text-gray-500">Evaluation Basis</div>
                    </div>
                    
                    <!-- Connection Line Out -->
                    <div class="absolute top-1/2 right-0 w-8 h-0.5 bg-slate-300 translate-x-full"></div>
                </div>

                <!-- Level 2: Truth Types (Split) -->
                <div class="flex flex-col gap-8 flex-grow relative">
                    
                    <!-- Vertical Connector Spine -->
                    <div class="absolute left-[-24px] top-[16%] bottom-[16%] w-6 border-l-2 border-slate-300 rounded-l-xl"></div>
                    <!-- Connector dots/arms -->
                    <div class="absolute left-[-24px] top-[16%] w-6 h-0.5 bg-slate-300"></div>
                    <div class="absolute left-[-24px] bottom-[16%] w-6 h-0.5 bg-slate-300"></div>
                    <!-- Middle arm -->
                    <div class="absolute left-[-24px] top-1/2 w-6 h-0.5 bg-slate-300"></div>


                    <!-- Top: Objective Truth -->
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm opacity-60 hover:opacity-100 transition-opacity">
                        <h3 class="font-bold text-lg text-slate-700 mb-1">Objective / Ground Truth</h3>
                        <p class="text-sm text-slate-500">Factual, verifiable reality. <br><span class="italic text-xs">Example: Cat vs Dog classification</span></p>
                    </div>

                    <!-- Middle: Subjective Truth -->
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm opacity-60 hover:opacity-100 transition-opacity">
                        <h3 class="font-bold text-lg text-slate-700 mb-1">Subjective Truth</h3>
                        <p class="text-sm text-slate-500">Personal opinion & preference. <br><span class="italic text-xs">Example: Beauty, Art appreciation</span></p>
                    </div>

                    <!-- Bottom: Inter-Subjective Truth (Selected) -->
                    <div class="bg-purple-50 p-6 rounded-xl border-2 border-purple-500 shadow-md relative transform scale-105">
                        <div class="absolute -top-3 right-4 bg-purple-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wide">Method Used</div>
                        <h3 class="font-bold text-lg text-purple-800 mb-1">Inter-Subjective Truth</h3>
                        <p class="text-sm text-purple-700 mb-3">Consensus reality shared by a group.</p>
                        
                        <div class="inline-flex items-center bg-white border border-purple-200 rounded-full px-3 py-1 text-xs font-semibold text-purple-600 shadow-sm mb-4">
                            <span class="mr-1">✨</span> Wisdom of the Crowd
                        </div>

                        <!-- ADDED CONTENT: CONDITIONS LIST -->
                        <div class="mt-4 pt-4 border-t border-purple-200 text-left">
                            <p class="text-xs font-semibold text-purple-800 mb-2">Harnessing inter-subjective truth requires controlled conditions:</p>
                            
                            <ol class="list-decimal list-outside ml-4 space-y-3 text-xs text-purple-900">
                                <!-- 1. Guideline -->
                                <li>
                                    <strong>Annotation Guideline:</strong> 
                                    <span class="text-purple-700">A well-structured guideline ensures consistency.</span>
                                </li>

                                <!-- 2. Crowd -->
                                <li>
                                    <strong>Qualified Group:</strong> 
                                    <span class="text-purple-700">Calibrated group required.</span>
                                    <div class="mt-1 text-[10px] bg-red-50 text-red-600 px-2 py-1 rounded inline-block border border-red-100">
                                        Random internet clicks ≠ Wisdom of Crowd
                                    </div>
                                </li>

                                <!-- 3. Convergent Expression (Table) -->
                                <li>
                                    <strong>Convergent Expression:</strong>
                                    
                                    <!-- Table 1: Inconsistent (Original) -->
                                    <div class="mt-1 mb-3 overflow-hidden rounded border border-purple-200">
                                        <table class="w-full text-[10px] table-fixed">
                                            <thead class="bg-purple-100 text-purple-900">
                                                <tr>
                                                    <th class="p-1 border border-purple-200 text-center">Benson</th>
                                                    <th class="p-1 border border-purple-200 text-center">Mridul</th>
                                                    <th class="p-1 border border-purple-200 text-center">Sarayna</th>
                                                    <th class="p-1 border border-purple-200 text-center">Karam</th>
                                                    <th class="p-1 border border-purple-200 bg-red-50 text-red-700 text-center">Final Label</th>
                                                </tr>
                                            </thead>
                                            <tbody class="bg-white text-center">
                                                <tr>
                                                    <td class="p-1 border border-purple-100 text-slate-600">"it is good"</td>
                                                    <td class="p-1 border border-purple-100 text-slate-600">"Good"</td>
                                                    <td class="p-1 border border-purple-100 text-slate-600">"9 out of 10"</td>
                                                    <td class="p-1 border border-purple-100 text-slate-600">"like it"</td>
                                                    <td class="p-1 border border-purple-100 font-bold text-red-600">???</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <div class="text-[9px] text-red-500 mt-1 text-center font-medium p-1 bg-red-50">❌ Inconsistent (Cannot Aggregate)</div>
                                    </div>

                                    <!-- Arrow Divider -->
                                    <div class="flex justify-center -my-2 relative z-10">
                                        <div class="bg-white p-1 rounded-full border border-purple-100 shadow-sm text-purple-400">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline></svg>
                                        </div>
                                    </div>

                                    <!-- Table 2: Convergent (New) -->
                                    <div class="mt-2 overflow-hidden rounded border border-green-200 shadow-sm">
                                        <table class="w-full text-[10px] table-fixed">
                                            <thead class="bg-green-50 text-green-900">
                                                <tr>
                                                    <th class="p-1 border border-green-100 text-center">Benson</th>
                                                    <th class="p-1 border border-green-100 text-center">Mridul</th>
                                                    <th class="p-1 border border-green-100 text-center">Sarayna</th>
                                                    <th class="p-1 border border-green-100 text-center">Karam</th>
                                                    <th class="p-1 border border-green-100 bg-green-100 text-green-800 text-center">Final Label</th>
                                                </tr>
                                            </thead>
                                            <tbody class="bg-white text-center">
                                                <tr>
                                                    <td class="p-1 border border-green-100 text-green-800 bg-green-100 font-medium">2</td>
                                                    <td class="p-1 border border-green-100 text-green-800 bg-green-100 font-medium">2</td>
                                                    <td class="p-1 border border-green-100 text-green-800 bg-green-100 font-medium">2</td>
                                                    <td class="p-1 border border-green-100 text-slate-400">0</td>
                                                    <td class="p-1 border border-green-100 font-bold text-white bg-green-500">2</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <div class="text-[9px] text-green-600 mt-1 text-center font-medium p-1 bg-green-50">✅ Consistent (Aggregatable via Majority Vote)</div>
                                    </div>
                                </li>

                                <!-- 4. Metrics -->
                                <li>
                                    <strong>Agreement Metrics:</strong>
                                    <div class="mt-1 p-2 bg-white rounded border border-purple-200">
                                        <div class="flex items-center justify-between mb-1">
                                            <span class="font-semibold text-purple-800">Krippendorff’s Alpha (α)</span>
                                        </div>
                                        <div class="math-formula text-sm text-center my-2 text-purple-900">
                                            α = 1 - <div class="fraction"><span class="numerator">D<span class="sub">o</span></span><span class="denominator">D<span class="sub">e</span></span></div>
                                        </div>
                                        <div class="text-[10px] text-center text-green-600 font-medium bg-green-50 rounded py-0.5">
                                            α ≥ 0.80 → Very good
                                        </div>
                                    </div>
                                </li>

                                <!-- 5. Aggregation -->
                                <li>
                                    <strong>Aggregation Strategy:</strong>
                                    <div class="text-purple-700 mt-0.5">When disagreements remain: <span class="font-semibold">Apply majority voting</span> (for categorical labels).</div>
                                </li>
                            </ol>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>

    <!-- VIEW 5: INTELLIGENT SELECTION (Example) -->
    <div id="selection-view" class="hidden min-h-screen bg-slate-50 flex flex-col pt-24">
        <!-- Navbar -->
        <div class="border-b border-gray-200 px-8 py-4 flex items-center justify-between bg-white sticky-sub-nav shadow-sm">
            <button onclick="switchView('pipeline-view')" class="flex items-center text-slate-600 hover:text-blue-600 transition-colors font-medium">
                <i class="fas fa-arrow-left mr-2"></i>
                Back to Pipeline
            </button>
            <div class="text-lg font-bold text-slate-800">Intelligent Ticket Selection Example</div>
        </div>

        <!-- Content -->
        <div class="flex-grow p-8 flex flex-col items-center justify-start overflow-auto fade-in">
            
            <!-- Description Block -->
            <div class="max-w-4xl w-full mb-8 text-center">
                <h2 class="text-2xl font-bold text-slate-800 mb-4">Using Unsupervised Learning (ML-Clustering)</h2>
                <p class="text-slate-600 text-lg leading-relaxed bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                    "Identify groups (clusters) of tickets with similar linguistic patterns, enabling us to choose the most representative samples from each cluster for human labelling."
                </p>
            </div>

            <!-- Graph Container -->
            <div class="relative bg-white p-8 rounded-xl shadow-lg border border-slate-200 max-w-4xl w-full flex flex-col items-center">
                
                <!-- Y Axis Label -->
                <div class="absolute left-4 top-1/2 -translate-y-1/2 -rotate-90 text-sm font-bold text-slate-500 tracking-wide">
                    Total Sentence in ticket
                </div>

                <!-- Chart Area -->
                <div class="relative w-[600px] h-[400px] border-l-2 border-b-2 border-slate-400 ml-8 mb-8">
                    
                    <!-- SVG Scatter Plot -->
                    <svg width="100%" height="100%" viewBox="0 0 600 400" xmlns="http://www.w3.org/2000/svg">
                        
                        <!-- Cluster 1 (Blue - Top Left) -->
                        <g fill="#60a5fa" opacity="0.8">
                            <circle cx="150" cy="80" r="5" />
                            <circle cx="170" cy="90" r="5" />
                            <circle cx="140" cy="110" r="5" />
                            <circle cx="160" cy="120" r="5" />
                            <circle cx="180" cy="100" r="5" />
                            <circle cx="165" cy="70" r="5" />
                            <circle cx="155" cy="130" r="5" />
                            <circle cx="190" cy="115" r="5" />
                            <!-- Circle Boundary -->
                            <circle cx="160" cy="100" r="50" fill="none" stroke="#60a5fa" stroke-width="1.5" opacity="0.5"/>
                        </g>

                        <!-- Cluster 2 (Green - Middle Right) -->
                        <g fill="#4ade80" opacity="0.8">
                            <circle cx="400" cy="150" r="5" />
                            <circle cx="420" cy="170" r="5" /> <!-- Target 1 -->
                            <circle cx="390" cy="180" r="5" />
                            <circle cx="430" cy="190" r="5" /> <!-- Target 2 -->
                            <circle cx="410" cy="200" r="5" />
                            <circle cx="440" cy="160" r="5" />
                            <circle cx="380" cy="165" r="5" />
                            <!-- Circle Boundary -->
                            <circle cx="410" cy="175" r="50" fill="none" stroke="#4ade80" stroke-width="1.5" opacity="0.5"/>
                        </g>

                        <!-- Cluster 3 (Orange - Bottom Left) -->
                        <g fill="#fb923c" opacity="0.8">
                            <circle cx="120" cy="300" r="5" />
                            <circle cx="140" cy="320" r="5" />
                            <circle cx="110" cy="330" r="5" />
                            <circle cx="150" cy="290" r="5" />
                            <circle cx="130" cy="350" r="5" />
                            <circle cx="160" cy="310" r="5" />
                            <!-- Circle Boundary -->
                            <circle cx="135" cy="315" r="45" fill="none" stroke="#fb923c" stroke-width="1.5" opacity="0.5"/>
                        </g>

                        <!-- Cluster 4 (Red - Bottom Center) -->
                        <g fill="#f87171" opacity="0.8">
                            <circle cx="300" cy="300" r="5" />
                            <circle cx="320" cy="280" r="5" />
                            <circle cx="290" cy="320" r="5" />
                            <circle cx="310" cy="330" r="5" />
                            <circle cx="330" cy="310" r="5" />
                            <!-- Circle Boundary -->
                            <circle cx="310" cy="310" r="40" fill="none" stroke="#f87171" stroke-width="1.5" opacity="0.5"/>
                        </g>

                        <!-- Callout Lines -->
                        <line x1="480" y1="100" x2="425" y2="165" stroke="#64748b" stroke-width="1" />
                        <line x1="480" y1="140" x2="435" y2="185" stroke="#64748b" stroke-width="1" />

                    </svg>

                    <!-- Labels (HTML Overlay for better styling) -->
                    <div class="absolute top-[85px] right-[50px] bg-slate-200 text-slate-700 px-3 py-1 rounded text-xs font-bold shadow-sm">
                        WPB-123
                    </div>
                    <div class="absolute top-[125px] right-[30px] bg-slate-200 text-slate-700 px-3 py-1 rounded text-xs font-bold shadow-sm">
                        WPB-321
                    </div>

                </div>

                <!-- X Axis Label -->
                <div class="text-sm font-bold text-slate-500 tracking-wide mt-2">
                    Total word in ticket
                </div>

            </div>
        </div>
    </div>

    <!-- VIEW 6: ML MODEL PROCESS -->
    <div id="ml-view" class="hidden min-h-screen bg-slate-50 flex flex-col pt-24">
        <!-- Navbar -->
        <div class="border-b border-gray-200 px-8 py-4 flex items-center justify-between bg-white sticky-sub-nav shadow-sm">
            <button onclick="switchView('pipeline-view')" class="flex items-center text-slate-600 hover:text-emerald-600 transition-colors font-medium">
                <i class="fas fa-arrow-left mr-2"></i>
                Back to Pipeline
            </button>
            <div class="text-lg font-bold text-slate-800">Model Training & Inference</div>
        </div>

        <!-- Content Area -->
        <div class="flex-grow p-8 flex flex-col items-center justify-center overflow-auto fade-in gap-12">
            
            <!-- Phase 1: Training -->
            <div class="w-full max-w-5xl bg-white p-8 rounded-xl border border-slate-200 shadow-md">
                <h3 class="font-bold text-lg text-slate-700 mb-6 uppercase tracking-wider border-b pb-2">Phase 1: Model Training (Supervised Learning)</h3>
                
                <div class="flex items-center justify-between gap-4">
                    <!-- Input -->
                    <div class="flex flex-col items-center w-1/4">
                        <div class="w-16 h-20 border-2 border-slate-300 rounded bg-slate-50 flex flex-col justify-center items-center mb-2 shadow-sm">
                            <div class="w-10 h-1 bg-slate-300 mb-1 rounded"></div>
                            <div class="w-8 h-1 bg-slate-300 mb-1 rounded"></div>
                            <div class="w-10 h-1 bg-slate-300 rounded"></div>
                        </div>
                        <p class="text-xs text-center text-slate-600">Jira tickets with Human label + 25 linguistic features<br><strong>Human label (0=Poor, 1=Normal, 2=Good)</strong></p>
                    </div>

                    <!-- Arrow -->
                    <div class="flex-grow h-0.5 bg-slate-300 relative">
                        <div class="absolute right-0 top-1/2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-t-transparent border-b-[6px] border-b-transparent border-l-[8px] border-l-slate-300"></div>
                    </div>

                    <!-- Process -->
                    <div class="border-2 border-slate-800 rounded-full px-8 py-4 bg-white shadow-sm w-1/4 text-center">
                        <span class="font-bold text-slate-800">ML MODEL</span>
                    </div>

                    <!-- Arrow -->
                    <div class="flex-grow h-0.5 bg-slate-300 relative">
                        <div class="absolute right-0 top-1/2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-t-transparent border-b-[6px] border-b-transparent border-l-[8px] border-l-slate-300"></div>
                    </div>

                    <!-- Output -->
                    <div class="w-1/4 text-center font-bold text-slate-800 text-lg">
                        PREDICTIVE<br>MODEL
                    </div>
                </div>
            </div>

            <!-- Phase 2: Inference -->
            <div class="w-full max-w-5xl bg-white p-8 rounded-xl border border-slate-200 shadow-md">
                <h3 class="font-bold text-lg text-slate-700 mb-6 uppercase tracking-wider border-b pb-2">Phase 2: Model Inference (Human-like Scoring)</h3>
                
                <div class="flex items-center justify-between gap-4">
                    <!-- Input -->
                    <div class="flex flex-col items-center w-1/4">
                        <div class="w-16 h-20 border-2 border-slate-300 rounded bg-slate-50 flex flex-col justify-center items-center mb-2 shadow-sm">
                            <div class="w-10 h-1 bg-slate-300 mb-1 rounded"></div>
                            <div class="w-8 h-1 bg-slate-300 mb-1 rounded"></div>
                            <div class="w-10 h-1 bg-slate-300 rounded"></div>
                        </div>
                        <p class="text-xs text-center text-slate-600 uppercase">New data without human label but having 25 linguistic features</p>
                    </div>

                    <!-- Arrow -->
                    <div class="flex-grow h-0.5 bg-slate-300 relative">
                        <div class="absolute right-0 top-1/2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-t-transparent border-b-[6px] border-b-transparent border-l-[8px] border-l-slate-300"></div>
                    </div>

                    <!-- Process -->
                    <div class="border-2 border-slate-800 rounded-full px-8 py-4 bg-white shadow-sm w-1/4 text-center">
                        <span class="font-bold text-slate-800">PREDICTIVE<br>MODEL</span>
                    </div>

                    <!-- Arrow -->
                    <div class="flex-grow h-0.5 bg-slate-300 relative">
                        <div class="absolute right-0 top-1/2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-t-transparent border-b-[6px] border-b-transparent border-l-[8px] border-l-slate-300"></div>
                    </div>

                    <!-- Output -->
                    <div class="w-1/4 text-center">
                        <div class="font-bold text-slate-800 text-sm mb-1 uppercase">Label like Human gave it,</div>
                        <p class="text-xs text-slate-600">e.g. "Good (0.822 probability human would agree)"</p>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- VIEW 7: VALUE MAPPING EXAMPLE -->
    <div id="mapping-view" class="hidden min-h-screen bg-slate-50 flex flex-col pt-24">
        <!-- Navbar -->
        <div class="border-b border-gray-200 px-8 py-4 flex items-center justify-between bg-white sticky-sub-nav shadow-sm">
            <button onclick="switchView('pipeline-view')" class="flex items-center text-slate-600 hover:text-orange-600 transition-colors font-medium">
                <i class="fas fa-arrow-left mr-2"></i>
                Back to Pipeline
            </button>
            <div class="text-lg font-bold text-slate-800">Score Mapping & Interpretation</div>
        </div>

        <!-- Content Area -->
        <div class="flex-grow p-8 flex flex-col items-center justify-start overflow-auto fade-in">
            
            <div class="max-w-6xl w-full bg-white rounded-xl border border-slate-200 shadow-md overflow-hidden">
                <div class="p-6 border-b border-slate-100 bg-slate-50">
                    <h3 class="font-bold text-lg text-slate-800">Example Output: SHAP Analysis & Score Calculation</h3>
                    <p class="text-sm text-slate-500">How linguistic features translate to probability classes and final scores.</p>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left">
                        <thead class="bg-slate-100 text-slate-700 font-semibold uppercase text-xs">
                            <tr>
                                <th class="p-4 border-b">Key</th>
                                <th class="p-4 border-b w-1/3">SHAP (Interpretation)</th>
                                <th class="p-4 border-b text-center">Score (5–95)</th>
                                <th class="p-4 border-b text-center text-emerald-700 bg-emerald-50">Class 2 (Good)</th>
                                <th class="p-4 border-b text-center text-orange-700 bg-orange-50">Class 1 (Acceptable)</th>
                                <th class="p-4 border-b text-center text-red-700 bg-red-50">Class 0 (Poor)</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-100">
                            <!-- Row 1 -->
                            <tr class="hover:bg-slate-50 transition-colors">
                                <td class="p-4 font-mono text-xs font-bold text-slate-500">WPB-1</td>
                                <td class="p-4 text-slate-700">Long sentences but consistent flow increased perceived clarity.</td>
                                <td class="p-4 text-center">
                                    <span class="inline-block bg-emerald-100 text-emerald-800 font-bold px-3 py-1 rounded-full">82</span>
                                </td>
                                <td class="p-4 text-center bg-emerald-50/50 font-medium text-slate-700">65%</td>
                                <td class="p-4 text-center bg-orange-50/50 text-slate-500">25%</td>
                                <td class="p-4 text-center bg-red-50/50 text-slate-400">10%</td>
                            </tr>
                            
                            <!-- Row 2 -->
                            <tr class="hover:bg-slate-50 transition-colors">
                                <td class="p-4 font-mono text-xs font-bold text-slate-500">WPB-2</td>
                                <td class="p-4 text-slate-700">Overuse of technical jargon and complex nesting reduced readability.</td>
                                <td class="p-4 text-center">
                                    <span class="inline-block bg-orange-100 text-orange-800 font-bold px-3 py-1 rounded-full">48</span>
                                </td>
                                <td class="p-4 text-center bg-emerald-50/50 text-slate-400">15%</td>
                                <td class="p-4 text-center bg-orange-50/50 font-medium text-slate-700">45%</td>
                                <td class="p-4 text-center bg-red-50/50 text-slate-500 font-medium">40%</td>
                            </tr>

                            <!-- Row 3 -->
                            <tr class="hover:bg-slate-50 transition-colors">
                                <td class="p-4 font-mono text-xs font-bold text-slate-500">WPB-3</td>
                                <td class="p-4 text-slate-700">Simple vocabulary and clear sentence rhythm improved user comprehension.</td>
                                <td class="p-4 text-center">
                                    <span class="inline-block bg-emerald-100 text-emerald-800 font-bold px-3 py-1 rounded-full">86</span>
                                </td>
                                <td class="p-4 text-center bg-emerald-50/50 font-medium text-slate-700">65%</td>
                                <td class="p-4 text-center bg-orange-50/50 text-slate-500">30%</td>
                                <td class="p-4 text-center bg-red-50/50 text-slate-400">5%</td>
                            </tr>

                            <!-- Row 4 -->
                            <tr class="hover:bg-slate-50 transition-colors">
                                <td class="p-4 font-mono text-xs font-bold text-slate-500">WPB-4</td>
                                <td class="p-4 text-slate-700">Short, fragmented sentences and missing connectors lowered clarity perception.</td>
                                <td class="p-4 text-center">
                                    <span class="inline-block bg-red-100 text-red-800 font-bold px-3 py-1 rounded-full">42</span>
                                </td>
                                <td class="p-4 text-center bg-emerald-50/50 text-slate-400">10%</td>
                                <td class="p-4 text-center bg-orange-50/50 text-slate-500">35%</td>
                                <td class="p-4 text-center bg-red-50/50 font-medium text-slate-700">55%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>

    <!-- JavaScript for Interaction -->
    <script>
        function switchView(viewId) {
            const views = ['pipeline-view', 'ticket-view', 'feature-view', 'annotation-view', 'selection-view', 'ml-view', 'mapping-view'];
            
            // Hide all views first
            views.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.classList.add('hidden');
            });

            // Show target view
            const target = document.getElementById(viewId);
            if (target) {
                target.classList.remove('hidden');
                window.scrollTo(0, 0);
            }
        }

        function showTab(tabId, btn) {
            // Hide all contents
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active', 'border-b-2', 'border-blue-600', 'text-blue-600'));
            
            // Show selected content
            document.getElementById(tabId).classList.remove('hidden');
            
            // Highlight selected button
            btn.classList.add('active');
        }

        function toggleRandomScore(btn) {
            // Stop propagation so we don't trigger parent clicks if any
            event.stopPropagation();
            
            if (btn.innerText === 'View Score') {
                const score = Math.floor(Math.random() * 101);
                btn.innerText = score.toString();
                btn.classList.add('font-bold', 'text-indigo-600'); 
            } else {
                btn.innerText = 'View Score';
                btn.classList.remove('font-bold', 'text-indigo-600');
            }
        }
    </script>
</body>
</html>
