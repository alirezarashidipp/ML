<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JIRA Ticket Readability Evaluation Pipeline</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }

        /* Animations */
        .fade-in-up {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s ease-out forwards;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        @keyframes fadeInUp {
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; }
        .delay-400 { animation-delay: 0.4s; }
        .delay-500 { animation-delay: 0.5s; }
        .delay-600 { animation-delay: 0.6s; }
        .delay-700 { animation-delay: 0.7s; }

        /* Card Interactions */
        .pipeline-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .pipeline-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            border-color: #3b82f6;
        }

        /* JIRA Ticket Styles */
        .jira-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.9em;
        }
        .jira-table th, .jira-table td {
            border: 1px solid #dfe1e6;
            padding: 8px;
            text-align: left;
        }
        .jira-table th {
            background-color: #f4f5f7;
            font-weight: 600;
            color: #172b4d;
        }
        .jira-link {
            color: #0052cc;
            text-decoration: none;
        }
        .jira-link:hover {
            text-decoration: underline;
        }
        
        /* Tab Active State */
        .tab-btn.active {
            border-bottom: 2px solid #0052cc;
            color: #0052cc;
            font-weight: 600;
        }

        /* Feature Tree Connectors */
        .tree-connector-v {
            width: 2px;
            background-color: #cbd5e1;
            position: absolute;
        }
        .tree-connector-h {
            height: 2px;
            background-color: #cbd5e1;
            position: absolute;
        }
        .bracket {
            border-right: 2px solid #94a3b8;
            border-top: 2px solid #94a3b8;
            border-bottom: 2px solid #94a3b8;
            width: 20px;
            position: absolute;
            right: -20px;
            top: 20px;
            bottom: 20px;
            border-top-right-radius: 10px;
            border-bottom-right-radius: 10px;
        }
        /* Custom Bracket for Feature View */
        .feature-bracket {
            position: absolute;
            left: -20px;
            top: 10%;
            bottom: 10%;
            width: 20px;
            border-left: 3px solid #cbd5e1;
            border-top: 3px solid #cbd5e1;
            border-bottom: 3px solid #cbd5e1;
            border-top-left-radius: 12px;
            border-bottom-left-radius: 12px;
        }
        .feature-bracket::after {
            content: '';
            position: absolute;
            top: 50%;
            left: -3px; /* Align with border-left */
            width: 15px;
            height: 3px;
            background-color: #cbd5e1;
            transform: translate(-100%, -50%);
        }

        /* Math Formulas CSS */
        .math-formula {
            display: inline-flex;
            align-items: center;
            font-family: 'Times New Roman', serif;
            font-style: italic;
        }
        .fraction {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            margin: 0 4px;
            vertical-align: middle;
            font-size: 0.9em;
        }
        .numerator {
            border-bottom: 1px solid currentColor;
            padding: 0 2px;
            text-align: center;
        }
        .denominator {
            padding: 0 2px;
            text-align: center;
        }
        .sub {
            font-size: 0.7em;
            vertical-align: sub;
        }
    </style>
</head>
<body class="min-h-screen text-slate-800">

    <!-- VIEW 1: MAIN PIPELINE -->
    <div id="pipeline-view" class="flex flex-col items-center justify-center min-h-screen p-6 w-full transition-opacity duration-500">
        
        <!-- Header -->
        <header class="text-center mb-12 fade-in-up">
            <h1 class="text-4xl md:text-5xl font-bold text-slate-900 mb-4 tracking-tight">
                JIRA Ticket Readability <span class="text-blue-600">Evaluation Pipeline</span>
            </h1>
            <p class="text-lg text-slate-500 max-w-2xl mx-auto">
                An automated workflow transforming raw text into human-aligned readability scores.
            </p>
        </header>

        <div class="relative w-full max-w-6xl mx-auto">
            
            <!-- ROW 1 -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-16 relative">
                
                <!-- Card 1: Raw Tickets (Clickable) -->
                <div onclick="switchView('ticket-view')" class="pipeline-card fade-in-up delay-100 bg-white p-6 rounded-xl border border-slate-200 shadow-md relative z-10 flex flex-col items-center text-center h-full hover:ring-2 hover:ring-blue-400">
                    <div class="w-12 h-12 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><line x1="10" y1="9" x2="8" y2="9"/></svg>
                    </div>
                    <h3 class="font-bold text-lg mb-2 text-slate-800">Raw JIRA Tickets</h3>
                    <p class="text-sm text-slate-500">Short, domain-specific issue descriptions and comments.</p>
                    <span class="mt-auto text-xs font-semibold text-blue-500 pt-2 bg-blue-50 px-3 py-1 rounded-full mt-2">Click to View Scenarios</span>
                </div>

                <!-- Card 2: Feature Extraction (Clickable Now) -->
                <div onclick="switchView('feature-view')" class="pipeline-card fade-in-up delay-200 bg-white p-6 rounded-xl border border-slate-200 shadow-md relative z-10 flex flex-col items-center text-center h-full hover:ring-2 hover:ring-indigo-400">
                    <div class="w-12 h-12 bg-indigo-50 text-indigo-600 rounded-full flex items-center justify-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></svg>
                    </div>
                    <h3 class="font-bold text-lg mb-2">Feature Extraction</h3>
                    <p class="text-sm text-slate-500">25 linguistic & readability features extracted per ticket.</p>
                    <span class="mt-auto text-xs font-semibold text-indigo-500 pt-2 bg-indigo-50 px-3 py-1 rounded-full mt-2">Click to View Details</span>
                </div>

                <!-- Card 3: Human Annotation (Clickable Now) -->
                <div onclick="switchView('annotation-view')" class="pipeline-card fade-in-up delay-300 bg-white p-6 rounded-xl border border-slate-200 shadow-md relative z-10 flex flex-col items-center text-center h-full hover:ring-2 hover:ring-purple-400">
                    <div class="w-12 h-12 bg-purple-50 text-purple-600 rounded-full flex items-center justify-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                    </div>
                    <h3 class="font-bold text-lg mb-2">Human Annotation</h3>
                    <div class="text-xs font-mono bg-slate-100 px-3 py-1 rounded text-slate-600 mt-1">
                        0 = Poor <br> 1 = Normal <br> 2 = Good
                    </div>
                    <span class="mt-auto text-xs font-semibold text-purple-500 pt-2 bg-purple-50 px-3 py-1 rounded-full mt-2">Click to View Logic</span>
                </div>

                <!-- Card 4: Agreement Check -->
                <div class="pipeline-card fade-in-up delay-400 bg-blue-50 p-6 rounded-xl border-2 border-blue-200 shadow-sm relative z-10 flex flex-col items-center text-center h-full cursor-default">
                    <div class="w-12 h-12 bg-white text-blue-600 rounded-full flex items-center justify-center mb-4 shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                    </div>
                    <h3 class="font-bold text-lg mb-2 text-blue-800">Agreement Check</h3>
                    <p class="text-sm text-blue-600">Krippendorff's Alpha</p>
                </div>
            </div>

            <!-- ROW 2 -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 max-w-3xl mx-auto mb-16 relative">
                <!-- Card 5: ML Model -->
                <div class="pipeline-card fade-in-up delay-500 bg-white p-8 rounded-xl border border-slate-200 shadow-lg relative z-10 flex flex-col items-center text-center cursor-default">
                    <div class="w-14 h-14 bg-emerald-50 text-emerald-600 rounded-full flex items-center justify-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
                    </div>
                    <h3 class="font-bold text-xl mb-2">ML Model: XGBoost</h3>
                    <p class="text-sm text-slate-500">Learns relation between features & perception.</p>
                </div>

                <!-- Card 6: Value Mapping -->
                <div class="pipeline-card fade-in-up delay-600 bg-white p-8 rounded-xl border border-slate-200 shadow-lg relative z-10 flex flex-col items-center text-center cursor-default">
                    <div class="w-14 h-14 bg-orange-50 text-orange-600 rounded-full flex items-center justify-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"/><path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"/></svg>
                    </div>
                    <h3 class="font-bold text-xl mb-2">Value Mapping</h3>
                    <p class="text-sm text-slate-500">Transforms probabilities into Score (0–100).</p>
                </div>
            </div>

            <!-- ROW 3 -->
            <div class="max-w-md mx-auto relative">
                <div class="pipeline-card fade-in-up delay-700 bg-gradient-to-br from-blue-600 to-indigo-700 text-white p-8 rounded-2xl shadow-xl relative z-10 flex flex-col items-center text-center cursor-default">
                    <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mb-4 backdrop-blur-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                    </div>
                    <h3 class="font-bold text-2xl mb-2">Final Output</h3>
                    <p class="text-blue-100">Human-aligned Readability Score</p>
                </div>
            </div>
        </div>
    </div>


    <!-- VIEW 2: TICKET DETAILS (Initially Hidden) -->
    <div id="ticket-view" class="hidden min-h-screen bg-white flex flex-col">
        
        <!-- Navbar -->
        <div class="border-b border-gray-200 px-8 py-4 flex items-center justify-between sticky top-0 bg-white z-20">
            <button onclick="switchView('pipeline-view')" class="flex items-center text-slate-600 hover:text-blue-600 transition-colors font-medium">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
                Back to Pipeline
            </button>
            <div class="text-lg font-bold text-slate-800">Raw Data Inspection: PROJ-1024</div>
        </div>

        <!-- Content Area -->
        <div class="flex-grow p-8 bg-slate-50 flex justify-center fade-in">
            <div class="w-full max-w-4xl bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                
                <!-- Tabs -->
                <div class="flex border-b border-gray-200 bg-gray-50 flex-wrap">
                    <button onclick="showTab('scenario-1', this)" class="tab-btn active px-6 py-3 text-sm font-medium text-gray-600 hover:bg-gray-100 focus:outline-none transition-colors">Scenario 1: JIRA Front-End</button>
                    <button onclick="showTab('scenario-2', this)" class="tab-btn px-6 py-3 text-sm font-medium text-gray-600 hover:bg-gray-100 focus:outline-none transition-colors">Scenario 2: JIRA Markup</button>
                    <button onclick="showTab('scenario-3', this)" class="tab-btn px-6 py-3 text-sm font-medium text-gray-600 hover:bg-gray-100 focus:outline-none transition-colors">Scenario 3: Clean Text</button>
                    <button onclick="showTab('scenario-4', this)" class="tab-btn px-6 py-3 text-sm font-medium text-gray-600 hover:bg-gray-100 focus:outline-none transition-colors">Scenario 4: Grammar Check</button>
                </div>

                <!-- Tab Content 1: Visual -->
                <div id="scenario-1" class="tab-content p-8">
                    <div class="border border-gray-200 rounded p-6 bg-white">
                        <!-- Intentionally missing period for Scenario 4 fix -->
                        <h2 class="text-xl font-semibold text-[#172b4d] mb-4">As a developer, I want to add a robust logging feature</h2>
                        <div class="text-[#172b4d] text-base space-y-4">
                            <!-- Intentionally misspelled 'loging' for Scenario 4 fix -->
                            <p>We need to implement <strong>structured loging</strong> across the authentication service. This will help us debug issues in production more effectively.</p>
                            
                            <p>The logs should include timestamp, user ID, and request latency. <span style="color: #d04437; font-weight: bold;">Critical: Do not log passwords!</span></p>

                            <h4 class="font-bold mt-4 text-sm uppercase text-gray-500">Acceptance Criteria</h4>
                            <table class="jira-table">
                                <thead>
                                    <tr>
                                        <th>Requirement</th>
                                        <th>Priority</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>JSON Format Output</td>
                                        <td>High</td>
                                        <td>Pending</td>
                                    </tr>
                                    <tr>
                                        <td>PII Masking</td>
                                        <td>Critical</td>
                                        <td>In Review</td>
                                    </tr>
                                </tbody>
                            </table>

                            <div class="mt-6 pt-4 border-t border-gray-100 text-sm">
                                <span class="font-semibold">Contact Owner:</span> 
                                <a href="mailto:ali@example.com" class="jira-link">ali@example.com</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab Content 2: JIRA Markup -->
                <div id="scenario-2" class="tab-content hidden p-0 bg-[#282c34]">
                    <pre class="p-6 overflow-x-auto text-sm font-mono text-gray-300 leading-relaxed">
h2. As a developer, I want to add a robust logging feature
We need to implement *structured loging* across the authentication service.

The logs should include timestamp, user ID. {color:#d04437}Critical: Do not log passwords!{color}

||Requirement||Priority||
|JSON Format Output|High|

[Contact|mailto:ali@example.com]</pre>
                </div>

                <!-- Tab Content 3: Clean Text (Dirty) -->
                <div id="scenario-3" class="tab-content hidden p-8 bg-white">
                    <div class="font-mono text-sm text-slate-700 whitespace-pre-wrap leading-7 bg-slate-50 p-6 rounded border border-slate-200">
As a developer, I want to add a robust logging feature

We need to implement structured loging across the authentication service. This will help us debug issues in production more effectively.

The logs should include timestamp, user ID, and request latency. Critical: Do not log passwords!

Acceptance Criteria:
Requirement: JSON Format Output, Priority: High, Status: Pending
Requirement: PII Masking, Priority: Critical, Status: In Review
                    </div>
                </div>

                <!-- Tab Content 4: Grammar Check (Corrected) -->
                <div id="scenario-4" class="tab-content hidden p-8 bg-white">
                    <div class="font-mono text-sm text-slate-700 whitespace-pre-wrap leading-7 bg-green-50 p-6 rounded border border-green-200 relative">
                        <div class="absolute top-2 right-2 bg-green-200 text-green-800 text-xs px-2 py-1 rounded font-semibold">Verified</div>
As a developer, I want to add a robust logging feature.

We need to implement structured logging across the authentication service. This will help us debug issues in production more effectively.

The logs should include timestamp, user ID, and request latency. Critical: Do not log passwords!

Acceptance Criteria:
Requirement: JSON Format Output, Priority: High, Status: Pending.
Requirement: PII Masking, Priority: Critical, Status: In Review.
                    </div>
                    <div class="mt-4 text-sm text-slate-500">
                        <span class="font-semibold text-green-600">Corrections applied:</span>
                        <ul class="list-disc ml-5 mt-1">
                            <li>Added missing period to title.</li>
                            <li>Corrected spelling: "loging" &rarr; "logging".</li>
                            <li>Added missing periods to list items.</li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>
    </div>
    
    <!-- VIEW 3: FEATURE EXTRACTION BREAKDOWN -->
    <div id="feature-view" class="hidden min-h-screen bg-slate-50 flex flex-col">
        <!-- Navbar -->
        <div class="border-b border-gray-200 px-8 py-4 flex items-center justify-between sticky top-0 bg-white z-20 shadow-sm">
            <button onclick="switchView('pipeline-view')" class="flex items-center text-slate-600 hover:text-indigo-600 transition-colors font-medium">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
                Back to Pipeline
            </button>
            <div class="text-lg font-bold text-slate-800">Feature Extraction Breakdown</div>
        </div>

        <!-- Tree Diagram Area -->
        <div class="flex-grow p-8 flex items-center justify-center overflow-auto fade-in">
            <div class="flex items-center gap-12 w-full max-w-6xl">
                
                <!-- Level 1: Cleaned Text -->
                <div class="flex-shrink-0 relative">
                    <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-indigo-500 w-48 text-center relative z-10">
                        <div class="font-bold text-gray-800 mb-2">Cleaned Text</div>
                        <div class="text-xs text-gray-500">Processed Input</div>
                    </div>
                    
                    <!-- Connection Line Out -->
                    <div class="absolute top-1/2 right-0 w-8 h-0.5 bg-slate-300 translate-x-full"></div>
                </div>

                <!-- Level 2: Categories (Split) -->
                <div class="flex flex-col gap-12 flex-grow relative">
                    
                    <!-- Vertical Connector Spine -->
                    <div class="absolute left-[-24px] top-[20%] bottom-[20%] w-6 border-l-2 border-slate-300 rounded-l-xl"></div>
                    <!-- Connector dots/arms -->
                    <div class="absolute left-[-24px] top-[20%] w-6 h-0.5 bg-slate-300"></div>
                    <div class="absolute left-[-24px] bottom-[20%] w-6 h-0.5 bg-slate-300"></div>


                    <!-- Top Group: Global Readability -->
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm relative w-full">
                        <h3 class="font-bold text-lg text-indigo-700 mb-4 border-b pb-2">Global Readability Formula</h3>
                        
                        <div class="grid grid-cols-1 gap-3">
                            
                            <!-- 1. Flesch-Kincaid Grade (MATH FORMULA) -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm mb-1">Flesch-Kincaid Grade</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">US Navy, 1975</div>
                                <div class="font-mono text-xs text-indigo-800 bg-white p-2 rounded border border-indigo-100 text-center">
                                    (0.39 × ASL) + (11.8 × ASW) - 15.59
                                </div>
                                <div class="text-[9px] text-indigo-400 mt-1 text-center mb-2">
                                    ASL: Avg Sentence Length | ASW: Avg Syllables/Word
                                </div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>

                            <!-- 2. LIX Formula (MATH FORMULA) -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm mb-1">LIX Formula</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">Sweden, 1968</div>
                                <div class="font-mono text-xs text-indigo-800 bg-white p-2 rounded border border-indigo-100 text-center">
                                    (Words / Sentences) + (Long Words / Words × 100)
                                </div>
                                <div class="text-[9px] text-indigo-400 mt-1 text-center mb-2">
                                    Long Words: >6 letters
                                </div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>

                            <!-- 3. Linsear Write Formula (LW - MATH FORMULA ADDED) -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm mb-1">Linsear Write Formula (LW)</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">US Navy, 1970</div>
                                <div class="math-formula text-sm text-indigo-800 bg-white p-3 rounded border border-indigo-100 text-center w-full flex justify-center overflow-x-auto">
                                    <div class="fraction">
                                        <span class="numerator flex items-center">
                                            [ (100 - (
                                            <div class="fraction">
                                                <span class="numerator">100 × n<span class="sub">wsy&lt;3</span></span>
                                                <span class="denominator">n<span class="sub">w</span></span>
                                            </div>
                                            )) + (3 × 
                                            <div class="fraction">
                                                <span class="numerator">100 × n<span class="sub">wsy≥3</span></span>
                                                <span class="denominator">n<span class="sub">w</span></span>
                                            </div>
                                            ) ]
                                        </span>
                                        <span class="denominator flex items-center justify-center pt-1">
                                            (100 × 
                                            <div class="fraction">
                                                <span class="numerator">n<span class="sub">st</span></span>
                                                <span class="denominator">n<span class="sub">w</span></span>
                                            </div>)
                                        </span>
                                    </div>
                                </div>
                                <div class="text-[9px] text-indigo-400 mt-2 text-center mb-2">
                                    n<sub>wsy&lt;3</sub>: Words &lt;3 syl | n<sub>wsy≥3</sub>: Words ≥3 syl | n<sub>st</sub>: Sentences | n<sub>w</sub>: Words
                                </div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>
                            
                            <!-- 4. Gunning Fog -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm">Gunning Fog</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">Business Writing, 1952</div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>
                            <!-- 5. ARI -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm">Automated Readability Index (ARI)</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">US Air Force, 1967</div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>
                            <!-- 6. SMOG -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm">SMOG Index</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">McLaughlin, 1969</div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>
                            <!-- 7. CLI -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm">Coleman-Liau Index (CLI)</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">Linguistics, 1975</div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>
                            <!-- 8. Dale-Chall -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm">Dale-Chall Score</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">Ohio State, 1948</div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>
                            <!-- 9. Spache -->
                            <div class="flex flex-col p-3 bg-indigo-50 rounded border border-indigo-100">
                                <div class="font-bold text-indigo-900 text-sm">Spache Formula</div>
                                <div class="text-[10px] text-indigo-500 font-medium mb-2">Primary Grades, 1953</div>
                                <!-- Interactive Toggle -->
                                <div class="mt-auto border-t border-indigo-200 pt-2 flex justify-between items-center">
                                    <span class="text-[10px] text-slate-500">Output Example:</span>
                                    <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-indigo-200 rounded px-2 py-0.5 hover:bg-indigo-50 transition-colors text-indigo-600">View Score</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom Group: Linguistic Analysis -->
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm relative">
                        <h3 class="font-bold text-lg text-purple-700 mb-4 border-b pb-2">Linguistic Analysis</h3>
                        
                        <div class="grid grid-cols-1 gap-3">
                            <!-- 1. avg_sentence_length_tokens -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Average tokens per sentence</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 2. sentence_length_cv -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Sentence length variation</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 3. clause_density_finite_per_sentence -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Finite clauses per sentence</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 4. subordination_ratio -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Ratio of subordinate clauses</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 5. coordination_index_cconj_per_clause -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Coordination index per clause</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 6. avg_dependency_distance -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Average word dependency distance</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 7. np_mean_length_tokens -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Average noun phrase length</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 8. nominalization_density -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Density of nominalizations</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 9. noun_verb_ratio -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Ratio of nouns to verbs</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 10. passive_voice_percent_finite_verbs -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Percentage of passive verbs</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 11. mean_zipf_lemma -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Average word frequency score</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 12. lexical_diversity_mattr -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Vocabulary diversity score</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 13. technical_jargon_density -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Density of technical jargon</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 14. negation_density_per_sentence -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Negations per sentence</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>

                            <!-- 15. idea_density_predicates_per_10w -->
                            <div class="flex items-center justify-between p-2 bg-purple-50 rounded border border-purple-100">
                                <div class="flex items-center">
                                    <span class="w-2 h-2 bg-purple-500 rounded-full mr-2 flex-shrink-0"></span>
                                    <span class="font-medium text-xs text-purple-900">Idea density per ten words</span>
                                </div>
                                <button onclick="toggleRandomScore(this)" class="text-[10px] bg-white border border-purple-200 rounded px-2 py-0.5 hover:bg-purple-100 transition-colors text-purple-600">View Score</button>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>

    <!-- VIEW 4: ANNOTATION LOGIC -->
    <div id="annotation-view" class="hidden min-h-screen bg-slate-50 flex flex-col">
        <!-- Navbar -->
        <div class="border-b border-gray-200 px-8 py-4 flex items-center justify-between sticky top-0 bg-white z-20 shadow-sm">
            <button onclick="switchView('pipeline-view')" class="flex items-center text-slate-600 hover:text-purple-600 transition-colors font-medium">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
                Back to Pipeline
            </button>
            <div class="text-lg font-bold text-slate-800">Truth & Annotation Logic</div>
        </div>

        <!-- Tree Diagram Area -->
        <div class="flex-grow p-8 flex items-center justify-center overflow-auto fade-in">
            <div class="flex items-center gap-12 w-full max-w-5xl">
                
                <!-- Level 1: Truth Concept -->
                <div class="flex-shrink-0 relative">
                    <div class="bg-white p-8 rounded-lg shadow-md border-l-4 border-slate-500 w-48 text-center relative z-10">
                        <div class="font-bold text-xl text-gray-800 mb-2">Truth Concept</div>
                        <div class="text-xs text-gray-500">Evaluation Basis</div>
                    </div>
                    
                    <!-- Connection Line Out -->
                    <div class="absolute top-1/2 right-0 w-8 h-0.5 bg-slate-300 translate-x-full"></div>
                </div>

                <!-- Level 2: Truth Types (Split) -->
                <div class="flex flex-col gap-8 flex-grow relative">
                    
                    <!-- Vertical Connector Spine -->
                    <div class="absolute left-[-24px] top-[16%] bottom-[16%] w-6 border-l-2 border-slate-300 rounded-l-xl"></div>
                    <!-- Connector dots/arms -->
                    <div class="absolute left-[-24px] top-[16%] w-6 h-0.5 bg-slate-300"></div>
                    <div class="absolute left-[-24px] bottom-[16%] w-6 h-0.5 bg-slate-300"></div>
                    <!-- Middle arm -->
                    <div class="absolute left-[-24px] top-1/2 w-6 h-0.5 bg-slate-300"></div>


                    <!-- Top: Objective Truth -->
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm opacity-60 hover:opacity-100 transition-opacity">
                        <h3 class="font-bold text-lg text-slate-700 mb-1">Objective / Ground Truth</h3>
                        <p class="text-sm text-slate-500">Factual, verifiable reality. <br><span class="italic text-xs">Example: Cat vs Dog classification</span></p>
                    </div>

                    <!-- Middle: Subjective Truth -->
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm opacity-60 hover:opacity-100 transition-opacity">
                        <h3 class="font-bold text-lg text-slate-700 mb-1">Subjective Truth</h3>
                        <p class="text-sm text-slate-500">Personal opinion & preference. <br><span class="italic text-xs">Example: Beauty, Art appreciation</span></p>
                    </div>

                    <!-- Bottom: Inter-Subjective Truth (Selected) -->
                    <div class="bg-purple-50 p-6 rounded-xl border-2 border-purple-500 shadow-md relative transform scale-105">
                        <div class="absolute -top-3 right-4 bg-purple-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wide">Method Used</div>
                        <h3 class="font-bold text-lg text-purple-800 mb-1">Inter-Subjective Truth</h3>
                        <p class="text-sm text-purple-700 mb-3">Consensus reality shared by a group.</p>
                        
                        <div class="inline-flex items-center bg-white border border-purple-200 rounded-full px-3 py-1 text-xs font-semibold text-purple-600 shadow-sm mb-4">
                            <span class="mr-1">✨</span> Wisdom of the Crowd
                        </div>

                        <!-- ADDED CONTENT: CONDITIONS LIST -->
                        <div class="mt-4 pt-4 border-t border-purple-200 text-left">
                            <p class="text-xs font-semibold text-purple-800 mb-2">Harnessing inter-subjective truth requires controlled conditions:</p>
                            
                            <ol class="list-decimal list-outside ml-4 space-y-3 text-xs text-purple-900">
                                <!-- 1. Guideline -->
                                <li>
                                    <strong>Annotation Guideline:</strong> 
                                    <span class="text-purple-700">A well-structured guideline ensures consistency.</span>
                                </li>

                                <!-- 2. Crowd -->
                                <li>
                                    <strong>Qualified Group:</strong> 
                                    <span class="text-purple-700">Calibrated group required.</span>
                                    <div class="mt-1 text-[10px] bg-red-50 text-red-600 px-2 py-1 rounded inline-block border border-red-100">
                                        Random internet clicks ≠ Wisdom of Crowd
                                    </div>
                                </li>

                                <!-- 3. Convergent Expression (Table) -->
                                <li>
                                    <strong>Convergent Expression:</strong>
                                    
                                    <!-- Table 1: Inconsistent (Original) -->
                                    <div class="mt-1 mb-3 overflow-hidden rounded border border-purple-200">
                                        <table class="w-full text-[10px] table-fixed">
                                            <thead class="bg-purple-100 text-purple-900">
                                                <tr>
                                                    <th class="p-1 border border-purple-200 text-center">Benson</th>
                                                    <th class="p-1 border border-purple-200 text-center">Mridul</th>
                                                    <th class="p-1 border border-purple-200 text-center">Sarayna</th>
                                                    <th class="p-1 border border-purple-200 text-center">Karam</th>
                                                    <th class="p-1 border border-purple-200 bg-red-50 text-red-700 text-center">Final Label</th>
                                                </tr>
                                            </thead>
                                            <tbody class="bg-white text-center">
                                                <tr>
                                                    <td class="p-1 border border-purple-100 text-slate-600">"it is good"</td>
                                                    <td class="p-1 border border-purple-100 text-slate-600">"Good"</td>
                                                    <td class="p-1 border border-purple-100 text-slate-600">"9 out of 10"</td>
                                                    <td class="p-1 border border-purple-100 text-slate-600">"like it"</td>
                                                    <td class="p-1 border border-purple-100 font-bold text-red-600">???</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <div class="text-[9px] text-red-500 mt-1 text-center font-medium p-1 bg-red-50">❌ Inconsistent (Cannot Aggregate)</div>
                                    </div>

                                    <!-- Arrow Divider -->
                                    <div class="flex justify-center -my-2 relative z-10">
                                        <div class="bg-white p-1 rounded-full border border-purple-100 shadow-sm text-purple-400">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline></svg>
                                        </div>
                                    </div>

                                    <!-- Table 2: Convergent (New) -->
                                    <div class="mt-2 overflow-hidden rounded border border-green-200 shadow-sm">
                                        <table class="w-full text-[10px] table-fixed">
                                            <thead class="bg-green-50 text-green-900">
                                                <tr>
                                                    <th class="p-1 border border-green-100 text-center">Benson</th>
                                                    <th class="p-1 border border-green-100 text-center">Mridul</th>
                                                    <th class="p-1 border border-green-100 text-center">Sarayna</th>
                                                    <th class="p-1 border border-green-100 text-center">Karam</th>
                                                    <th class="p-1 border border-green-100 bg-green-100 text-green-800 text-center">Final Label</th>
                                                </tr>
                                            </thead>
                                            <tbody class="bg-white text-center">
                                                <tr>
                                                    <td class="p-1 border border-green-100 text-green-800 bg-green-100 font-medium">2</td>
                                                    <td class="p-1 border border-green-100 text-green-800 bg-green-100 font-medium">2</td>
                                                    <td class="p-1 border border-green-100 text-green-800 bg-green-100 font-medium">2</td>
                                                    <td class="p-1 border border-green-100 text-slate-400">0</td>
                                                    <td class="p-1 border border-green-100 font-bold text-white bg-green-500">2</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <div class="text-[9px] text-green-600 mt-1 text-center font-medium p-1 bg-green-50">✅ Consistent (Aggregatable via Majority Vote)</div>
                                    </div>
                                </li>

                                <!-- 4. Metrics -->
                                <li>
                                    <strong>Agreement Metrics:</strong>
                                    <div class="mt-1 p-2 bg-white rounded border border-purple-200">
                                        <div class="flex items-center justify-between mb-1">
                                            <span class="font-semibold text-purple-800">Krippendorff’s Alpha (α)</span>
                                        </div>
                                        <div class="math-formula text-sm text-center my-2 text-purple-900">
                                            α = 1 - <div class="fraction"><span class="numerator">D<span class="sub">o</span></span><span class="denominator">D<span class="sub">e</span></span></div>
                                        </div>
                                        <div class="text-[10px] text-center text-green-600 font-medium bg-green-50 rounded py-0.5">
                                            α ≥ 0.80 → Very good
                                        </div>
                                    </div>
                                </li>

                                <!-- 5. Aggregation -->
                                <li>
                                    <strong>Aggregation Strategy:</strong>
                                    <div class="text-purple-700 mt-0.5">When disagreements remain: <span class="font-semibold">Apply majority voting</span> (for categorical labels).</div>
                                </li>
                            </ol>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>

    <!-- JavaScript for Interaction -->
    <script>
        function switchView(viewId) {
            const views = ['pipeline-view', 'ticket-view', 'feature-view', 'annotation-view'];
            
            // Hide all views first
            views.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.classList.add('hidden');
            });

            // Show target view
            const target = document.getElementById(viewId);
            if (target) {
                target.classList.remove('hidden');
                window.scrollTo(0, 0);
            }
        }

        function showTab(tabId, btn) {
            // Hide all contents
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active', 'border-b-2', 'border-blue-600', 'text-blue-600'));
            
            // Show selected content
            document.getElementById(tabId).classList.remove('hidden');
            
            // Highlight selected button
            btn.classList.add('active');
        }

        function toggleRandomScore(btn) {
            // Stop propagation so we don't trigger parent clicks if any
            event.stopPropagation();
            
            if (btn.innerText === 'View Score') {
                const score = Math.floor(Math.random() * 101);
                btn.innerText = score.toString();
                btn.classList.add('font-bold', 'text-indigo-600'); 
            } else {
                btn.innerText = 'View Score';
                btn.classList.remove('font-bold', 'text-indigo-600');
            }
        }
    </script>
</body>
</html>
